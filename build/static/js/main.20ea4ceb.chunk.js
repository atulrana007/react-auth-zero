(this.webpackJsonpmacfeeauth0=this.webpackJsonpmacfeeauth0||[]).push([[0],{18:function(e,t,n){},30:function(e,t,n){},34:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(20),r=n.n(c),o=(n(30),n(2)),s=n(15),l=n.n(s),d=n(21),j=n(8),u=n(10),b=n(22),m=n(0),h=i.a.createContext({}),g=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],c=n[1],r=new b.a.WebAuth({domain:"dev-xl32ev2i.us.auth0.com",clientID:"9dR6Ug2BQQbmBMp6grHf1R962NBigRxg",responseType:"token id_token",redirectUri:"http://localhost:3000/authorize"});return Object(m.jsx)(h.Provider,{value:{webAuth:r,otpStart:function(e){return new Promise((function(t,n){var a={email:e,connection:"email",send:"code"};r.passwordlessStart(a,(function(e,a){e?(console.log(e),n(e)):t(a)}))}))},otpLogin:function(e,t){return new Promise((function(n,a){r.passwordlessLogin({email:e,connection:"email",verificationCode:t},(function(e,t){e?a(e):(window.origin=window.location.origin,n(t))}))}))},loginWithPassword:function(e,t){return new Promise((function(n,a){r.login({realm:"Username-Password-Authentication",username:e,password:t},(function(e,t){e?a(e):t&&(window.origin=window.location.origin,n(t))}))}))},AuthenticateUser:function(e){localStorage.setItem("auth_token",e),c(!0)},storeUserData:function(e){localStorage.setItem("userData",JSON.stringify(e))},isAuthenticated:i},children:e.children})};function O(e){var t=Object(a.useContext)(h),n=t.loginWithPassword,c=t.otpLogin,r=t.otpStart,s=Object(a.useState)({email:"",password:"",otp:"",otpAvailable:!1,isSubmitting:!1}),b=Object(u.a)(s,2),m=b[0],g=b[1],O=Object(a.useState)({email:"",isEmailError:"",databaseError:""}),p=Object(u.a)(O,2),x=p[0],v=p[1],f=Object(a.useState)(!1),w=Object(u.a)(f,2),C=w[0],N=w[1],E=Object(a.useState)(!1),S=Object(u.a)(E,2),L=S[0],k=S[1],A=function(e){switch(e.target.name){case"email":e.target.value?e.target.value&&(t=e.target.value,!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase()))?v(Object(o.a)(Object(o.a)({},x),{},Object(j.a)({isEmailError:!0},e.target.name,"Email is not valid"))):v(Object(o.a)(Object(o.a)({},x),{},Object(j.a)({isEmailError:!1},e.target.name,""))):v(Object(o.a)(Object(o.a)({},x),{},Object(j.a)({isEmailError:!0},e.target.name,"Email is required")))}var t},I=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),C){e.next=16;break}return e.prev=2,e.next=5,n(m.email,m.password);case 5:a=e.sent,v(Object(o.a)(Object(o.a)({},x),{},{databaseError:""})),console.log(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),v(Object(o.a)(Object(o.a)({},x),{},{databaseError:e.t0.description}));case 14:e.next=35;break;case 16:if(e.prev=16,!m.otpAvailable){e.next=24;break}return e.next=20,c(m.email,m.otp);case 20:i=e.sent,console.log(i,"ankit"),e.next=29;break;case 24:return e.next=26,r(m.email);case 26:s=e.sent,console.log("enter here",s),g(Object(o.a)(Object(o.a)({},m),{},{otpAvailable:!0}));case 29:e.next=35;break;case 31:e.prev=31,e.t1=e.catch(16),console.log(e.t1),v(Object(o.a)(Object(o.a)({},x),{},{databaseError:e.t1.description}));case 35:case"end":return e.stop()}}),e,null,[[2,10],[16,31]])})));return function(t){return e.apply(this,arguments)}}(),P=i.a.Children.only(e.children);return i.a.cloneElement(P,{onChange:function(e){g(Object(o.a)(Object(o.a)({},m),{},Object(j.a)({},e.target.name,e.target.value))),A(e)},onToggle:function(){N(!C),v(Object(o.a)(Object(o.a)({},x),{},{email:"",databaseError:""}))},switchLogin:C,onSubmit:I,LoginForm:m,LoginError:x,Continue:L,onPressContinue:function(){k(!0)}})}n(18);var p=n(25),x=function(e){var t=e.onChange,n=e.switchLogin,a=e.onSubmit,i=e.LoginError,c=e.LoginForm,r=e.onToggle,o=e.Continue,s=e.onPressContinue;return Object(m.jsxs)("div",{className:"LoginWrapperContainer",children:[Object(m.jsxs)("form",{className:"InputWrapper",children:[Object(m.jsx)("div",{className:"InputLabel",children:"Email"}),Object(m.jsxs)("div",{className:"InputAndLogo",style:{border:!0===i.isEmailError?"2px solid red":!1===i.isEmailError?"2px solid green":""},children:[Object(m.jsx)(p.a,{style:{height:"2rem",width:"2rem","margin-top":"0.5rem",color:"rgb(175, 174, 174)"}}),Object(m.jsx)("input",{type:"email",id:"email",name:"email",value:c.email,placeholder:"Email",className:"Input",onChange:t})]}),i.email&&Object(m.jsx)("div",{className:"Error",children:i.email}),o&&!n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"InputLabel",children:"Password"}),Object(m.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"********",className:"Input",onChange:t})]}),o&&n&&c.otpAvailable&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"InputLabel",children:"one-time passcode"}),Object(m.jsx)("input",{id:"otp",name:"otp",className:"Input",onChange:t})]}),!o&&Object(m.jsx)("button",{className:"continueButton",onClick:s,children:Object(m.jsx)("div",{children:"Continue"})}),o&&Object(m.jsx)("button",{className:"RequestOtp",onClick:a,children:n?c.otpAvailable?Object(m.jsx)("div",{children:"Sign in"}):Object(m.jsx)("div",{children:"Request one-time passcode"}):Object(m.jsx)("div",{children:"Login"})})]}),Object(m.jsx)("div",{className:"Error",children:i.databaseError}),o&&Object(m.jsxs)("div",{className:"SwitchContainer",children:[Object(m.jsx)("div",{className:"Switch",children:"OR"}),Object(m.jsx)("button",{className:"SwitchBtn",onClick:r,children:n?Object(m.jsx)("div",{children:"Sign in with a password"}):Object(m.jsx)("div",{children:"Sign in with a one-time passcode"})})]})]})},v=function(e){var t=e.onChange,n=e.switchLogin,a=e.onToggle,i=e.onSubmit,c=e.LoginError,r=e.LoginForm,o=e.Continue,s=e.onPressContinue;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"LoginContainer",children:[Object(m.jsxs)("div",{className:"LeftWrapper",children:[Object(m.jsxs)("div",{className:"WelcomeContainer",children:[Object(m.jsx)("img",{className:"Logo",alt:"logo",src:"./images/McAfee-Logo.png"}),Object(m.jsx)("div",{className:"Intro",children:"Sign in to your McAfee account"}),Object(m.jsx)("div",{className:"IntroSubHeading",children:"Enter your email address so we can find your account."})]}),Object(m.jsx)("hr",{className:"hr"})]}),Object(m.jsx)("div",{className:"RightWrapper",children:Object(m.jsx)(x,{LoginError:c,onChange:t,switchLogin:n,onSubmit:i,LoginForm:r,onToggle:a,onPressContinue:s,Continue:o})})]})})},f=function(e){return Object(m.jsx)(O,Object(o.a)(Object(o.a)({},e),{},{children:Object(m.jsx)(v,{})}))},w=n(14),C=n(3),N=(n(34),function(){var e=JSON.parse(localStorage.getItem("userData"));return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"DashboardContainer",children:[Object(m.jsx)("div",{className:"DashBoardHeading",children:"Welcome to DashBoard... "}),Object(m.jsx)("div",{className:"UserImg",style:{backgroundImage:"url(".concat(null===e||void 0===e?void 0:e.picture,")")}}),Object(m.jsx)("div",{className:"UserName",children:e.name})]})})}),E=function(e){return Object(m.jsx)(N,{})},S=function(){var e=Object(a.useContext)(h),t=e.isAuthenticated,n=e.storeUserData,i=e.AuthenticateUser,c=e.webAuth;return Object(a.useEffect)((function(){window.location.hash&&c.parseHash({hash:window.location.hash},(function(e,t){if(e)return console.log(e),void localStorage.clear();var a=t.idTokenPayload,c=a.email,r=a.name,o=a.picture,s=a.sub;n({email:c,name:r,picture:o,id:s}),i(t.idToken)}))}),[]),t?Object(m.jsx)(C.a,{to:"/dashboard"}):Object(m.jsx)("div",{children:"Loading...."})},L=function(){return Object(m.jsx)(w.a,{children:Object(m.jsx)(g,{children:Object(m.jsxs)(C.d,{children:[Object(m.jsx)(C.b,{exact:!0,path:"/",component:f}),Object(m.jsx)(C.b,{exact:!0,path:"/authorize",component:S}),Object(m.jsx)(C.b,{exact:!0,path:"/dashboard",component:E})]})})})};var k=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(L,{})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),A()}},[[39,1,2]]]);
//# sourceMappingURL=main.20ea4ceb.chunk.js.map